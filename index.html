<!DOCTYPE html>
<html dir="rtl" lang="he">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>תקנות בטיחות</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />

    <script
      src="https://code.jquery.com/jquery-3.5.1.min.js"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"
    ></script>

    <style>
      body > iframe {
        display: none;
      }
      .kbw-signature {
        width: 350px;
        height: 200px;
      }
      html,
      body {
        direction: rtl;
        overflow-x: hidden;
        position: relative;
      }

      #sig-canvas {
        border: 2px dotted #cccccc;
        border-radius: 15px;
        cursor: crosshair;
      }
      .thankyou-modal {
        background-color: white;
        height: 80vh;
        width: 100%;
        border: 1px solid black;
        position: fixed;
        z-index: 2;
        top: 10%;
        font-size: 3rem;
        text-align: center;
        /* display: flex; */
        justify-content: center;
        align-items: center;
        display: none;
      }
    </style>

    <script>
      $(document).ready(function () {
        var now = new Date();
        var day = ('0' + now.getDate()).slice(-2);
        var month = ('0' + (now.getMonth() + 1)).slice(-2);
        var year = now.getFullYear();
        //var today = year + '-' + month + '-' + day;
        $('#date').val(day + '/' + month + '/' + year);
      });

      function getHtml() {
        return `<!DOCTYPE html>
              <html lang="en">
              <head>
                ${document.head.innerHTML}
            </head>
            <body>
              ${document.body.innerHTML}
        </body>
        </html>`;
      }
      let counter = 0;

      function sendData() {
        if (counter > 0) {
          console.log('youve sended already');
          return;
        }
        console.log('sending data..');
        const signature = document.getElementById('sig-canvas');
        const full_name = document.getElementById('full_name').value;
        const email = document.getElementById('email').value;
        const id = document.getElementById('id').value;

        if (full_name == '' || email == '' || id == '') {
          alert(' יש למלא את כל השדות');
          return;
        }
        let res = confirm('האם חתמת בתחתית העמוד?');
        if (!res) return;
        const elCanvas = document.getElementById('sig-canvas');
        const sigContainer = document.getElementById('defaultSignature');
        const dataUrl = elCanvas.toDataURL();
        console.log(dataUrl);
        sigContainer.innerHTML = `<img src="${dataUrl}" alt="">`;

        console.log(signature, full_name, email, id);

        const data = {
          html: getHtml(),
          name: full_name,
          email: email,
          sig: signature,
          id: id,
          fileName: 'safety',
        };
        console.log(data);
        var xhr2 = new XMLHttpRequest();
        xhr2.open(
          'POST',
          'https://hook.eu1.make.com/h5411aqgmhauvf0u4uap4nvewjn7f59x',
          true
        );
        xhr2.setRequestHeader('Content-Type', 'application/json');
        xhr2.onload = function (e) {};
        xhr2.send(JSON.stringify(data));
        document.querySelector('.thankyou-modal').style.display = 'flex';
        counter++;
      }
    </script>
  </head>
  <body>
    <div class="thankyou-modal">
      <span
        >תודה שמילאתם את הטופס !<br />
        עוד כמה רגעים קובץ pdf ישלח למייל שלכם - אנא צאו מהדף</span
      >
    </div>
    <section>
      <div class="container">
        <div class="row justify-content-center">
          <div class="col">
            <div class="row">
              <div class="col text-center">
                <h2>תקנות בטיחות לעבודה החקלאית במסגרת הקבוצה</h2>
                <br />

                <p>
                  נוהל זה הוגדר על מנת להבטיח שמירה מרבית על בטיחות העובדים
                  בתנועה ובשטח העבודה החקלאי בכל עת, במטרה לשמור על בטיחות
                  ורווחת העובד והבריאות הגופנית של עובדי הקבוצה. הוראות ותקנות
                  אלה אינן באות במקום הוראות חוק.
                </p>
              </div>
            </div>

            <div class="row">
              <div class="col text-right">
                <p class="text-h3"></p>
                <div class="font-weight-bold">1 .היציאה לעבודה:</div>
                בטרם יציאתו של העובד לשטח, יהיה על אחריותו לבדוק כי קיים ברשותו:
                <br />
                א. נעליים סגורות ותקינות לעבודה
                <br />
                ב. כובע
                <br />
                ג. 3 ליטר מים לפחות
                <br />
                <br />
                <div class="font-weight-bold">2 .נהלי עבודה בשטח:</div>
                א. כל עובד ישתה מים במהלך היום לפי הצורך(לפחות 2 ליטרים ביום)
                <br />
                ב. חל איסור על העובד להשתמש בציוד לקוי מכל סוג שהוא כגון סולם
                שבור ו/או גבוה מהתקן המותר על פי חוק, סל קטיף קרוע, מזמרה שבורה
                וכו'. במידה ויימצא ציוד לא תקין, ידווח על כך העובד לראש הצוות
                שידאג להחליפו בהקדם.
                <br />
                ג. חל איסור על העובד להשתמש בציוד ללא הדרכת בטיחות ייעודית לציוד
                בו הוא משתמש(כגון סולם, מזמרה וכו')
                <br />
                ד. העובד יפעיל את הציוד שברשותו כחוק וישתמש בו למטרה שלשמה הוא
                נועד בלבד
                <br />
                ה. במידה ומשתמש העובד בסולם יש להפעיל שיקול דעת בעת השימוש בו
                ולשים לב ליציבותו טרם עלייה על הסולם.
                <br />
                ו. יש לשים לב לתגובה אלרגית אם מתחילה כתוצאה ממפגש עם פירות,
                עצים, שיחים או דברים אחרים שיכולים להמצא בשטח. אם מתחילה תגובה
                אלרגית יש להפסיק עבודה ולדווח לממונה הישיר וככלל יש להמנע ממגע
                עם שרף בעת קטיף פירות )כגון שרף המנגו(.
                <br />
                ז. כל הנוגע לשימוש בטרקטור או כלי חקלאי כבד: רק עובד המחזיק
                ברשותו רישיון נהיגה רלוונטי לכלי יוכל להשתמש בכלי. במהלך השימוש
                בטרקטור/כלי חקלאי אחר יפעל הנהג על פי הכללים הבאים:
                <br />
                כל עובד אחר שאין ברשותו לרישיון לטרקטור ינקוט במשנה זהירות
                ובתשומת לב כל זמן שהטרקטור עובד בשטח, ובפרט אם הטרקטור עובד
                בשורת העצים שבה העובד נמצא, בין אם עובד של הקבוצה מפעיל לבין אם
                הוא מופעל ע"י עובד של החקלאי.
                <br />
                בתוך כך, לעולם לא יעלה העובד עצמו על הטרקטור או על העגלות
                המורכבות עליו.
                <br />
                <br />
                <div class="font-weight-bold">3 .נהלי התנהגות בשטח:</div>
                א. בראש כל קבוצה יוגדר מראש מנהל צוות ע"י שחר או ע"י החקלאי.
                <br />
                מתוקף אחריותו וסמכותו חל על העובד החובה להישמע להוראות
                הרלוונטיות לתקני הבטיחות שיינתנו על ידי הראש צוות באופן שוטף.
                <br />
                ב. במסגרת תפקידו של ראש הצוות תהיה באפשרותו היכולת לאכוף את נהלי
                הבטיחות בכל מהלך שעות יום העבודה, באים יהיה הדבר נחוץ. בסמכותו
                להורות על הפסקת העבודה בגין ליקוי בטיחות שמצא לנכון להגדירו לא
                תקין.
                <br />
                ג. באם ירגיש העובד כל חולשה או תפקודו הגופני ייהפך ללא תקין
                במהלך יום העבודה(לרבות סחרחורות, כאבי ראש חזקים, בחילות, חום,
                פגיעות פיזיות וכו'), תחול על אחריותו המלאה חובת הדיווח בעל פה
                למנהל בשטח במהירות האפשרית. באם לא יהיה ביכולתו לעשות כך, ידווח
                טלפונית ישירות למנהל, שחר מרום, או לכל בעל סמכות אחרת.
                <br />
                ד. בכל רכב שיוצא לשטח יש ערכת עזרה ראשונה הכוללת אביזרי חבישה,
                חיטוי, ותרופות ללא מרשם. על אחריות כלל העובדים לדעת שבכל מקרה של
                פציעה/חבלה/מקרה חירום אחר יש להתקשר למד"א ולקבל הנחיות/להזמין
                פינוי רפואי.
                <br />
                <br />
                <div class="font-weight-bold">
                  הריני מצהיר בזאת שקראתי את התדריך במלואו וכי אני מבין את תנאיו
                  והשלכותיו כמו כן, הריני מצהיר כי במידה ומשהו אינו ברור לי,
                  אשאל את מנהלי העבודה עד אשר אדע.
                </div>
                <br />

                <div class="row">
                  <div class="col-12 col-lg-6">
                    <div class="row form-group align-items-center p-1">
                      <label class="text-right p-2" for="date">תאריך:</label>
                      <input
                        onchange="onChange(this)"
                        id="date"
                        name="date"
                        type="text"
                        class="col form-control text-center p-2"
                        readonly
                      />
                    </div>
                  </div>
                  <div class="col-12 col-lg-6">
                    <div class="row form-group align-items-center p-1">
                      <label class="text-right p-2" for="name">שם מלא:</label>
                      <input
                        onchange="onChange(this)"
                        value=""
                        id="full_name"
                        name="name"
                        type="text"
                        class="col form-control text-center p-2"
                        placeholder="עד 20 תווים"
                        maxlength="20"
                      />
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-12 col-lg-6">
                    <div class="row form-group align-items-center p-1">
                      <label class="text-right p-2" for="email"
                        >דואר אלקטרוני:</label
                      >
                      <input
                        id="email"
                        onchange="onChange(this)"
                        value=""
                        name="email"
                        type="email"
                        class="col form-control text-center p-2"
                        placeholder="עד 30 תווים"
                        maxlength="30"
                      />
                    </div>
                  </div>
                  <div class="col-12 col-lg-6">
                    <div class="row form-group align-items-center p-1">
                      <label class="text-right p-2" for="id">ת.ז:</label>
                      <input
                        id="id"
                        onchange="onChange(this)"
                        value=""
                        name="id"
                        type="number"
                        class="col form-control text-center p-2"
                        placeholder="9 ספרות"
                      />
                    </div>
                  </div>
                </div>

                <div class="form-group align-items-center">
                  <label class="col text-right p-2">חתימת העובד:</label>
                  <div id="defaultSignature">
                    <canvas id="sig-canvas" width="620" height="160"> </canvas>
                  </div>

                  <div class="col">
                    <button id="sig-clearBtn" class="btn btn-primary mt-4">
                      נקה חתימה
                    </button>
                    <button
                      onClick="sendData()"
                      id="svg"
                      class="btn btn-primary mt-4"
                    >
                      שלח טופס
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <br />

    <script>
      function onChange(el) {
        el.setAttribute('value', el.value);
      }

      (function () {
        window.requestAnimFrame = (function (callback) {
          return (
            window.requestAnimationFrame ||
            window.webkitRequestAnimationFrame ||
            window.mozRequestAnimationFrame ||
            window.oRequestAnimationFrame ||
            window.msRequestAnimaitonFrame ||
            function (callback) {
              window.setTimeout(callback, 1000 / 60);
            }
          );
        })();

        var canvas = document.getElementById('sig-canvas');
        var ctx = canvas.getContext('2d');
        ctx.strokeStyle = '#222222';
        ctx.lineWidth = 4;

        var drawing = false;
        var mousePos = {
          x: 0,
          y: 0,
        };
        var lastPos = mousePos;

        canvas.addEventListener('touchstart', function (event) {
          event.preventDefault();
        });
        canvas.addEventListener('touchmove', function (event) {
          event.preventDefault();
        });
        canvas.addEventListener('touchend', function (event) {
          event.preventDefault();
        });
        canvas.addEventListener('touchcancel', function (event) {
          event.preventDefault();
        });

        canvas.addEventListener(
          'mousedown',
          function (e) {
            drawing = true;
            lastPos = getMousePos(canvas, e);
          },
          false
        );

        canvas.addEventListener(
          'mouseup',
          function (e) {
            drawing = false;
          },
          false
        );

        canvas.addEventListener(
          'mousemove',
          function (e) {
            mousePos = getMousePos(canvas, e);
          },
          false
        );

        canvas.addEventListener('touchstart', function (e) {}, false);

        canvas.addEventListener(
          'touchmove',
          function (e) {
            var touch = e.touches[0];
            var me = new MouseEvent('mousemove', {
              clientX: touch.clientX,
              clientY: touch.clientY,
            });
            canvas.dispatchEvent(me);
          },
          false
        );

        canvas.addEventListener(
          'touchstart',
          function (e) {
            mousePos = getTouchPos(canvas, e);
            var touch = e.touches[0];
            var me = new MouseEvent('mousedown', {
              clientX: touch.clientX,
              clientY: touch.clientY,
            });
            canvas.dispatchEvent(me);
          },
          false
        );

        canvas.addEventListener(
          'touchend',
          function (e) {
            var me = new MouseEvent('mouseup', {});
            canvas.dispatchEvent(me);
          },
          false
        );

        function getMousePos(canvasDom, mouseEvent) {
          var rect = canvasDom.getBoundingClientRect();
          return {
            x: mouseEvent.clientX - rect.left,
            y: mouseEvent.clientY - rect.top,
          };
        }

        function getTouchPos(canvasDom, touchEvent) {
          var rect = canvasDom.getBoundingClientRect();
          return {
            x: touchEvent.touches[0].clientX - rect.left,
            y: touchEvent.touches[0].clientY - rect.top,
          };
        }

        function renderCanvas() {
          if (drawing) {
            ctx.moveTo(lastPos.x, lastPos.y);
            ctx.lineTo(mousePos.x, mousePos.y);
            ctx.stroke();
            lastPos = mousePos;
          }
        }

        // Prevent scrolling when touching the canvas
        document.body.addEventListener(
          'touchstart',
          function (e) {
            if (e.target == canvas) {
              e.preventDefault();
            }
          },
          false
        );
        document.body.addEventListener(
          'touchend',
          function (e) {
            if (e.target == canvas) {
              e.preventDefault();
            }
          },
          false
        );
        document.body.addEventListener(
          'touchmove',
          function (e) {
            if (e.target == canvas) {
              e.preventDefault();
            }
          },
          false
        );

        (function drawLoop() {
          requestAnimFrame(drawLoop);
          renderCanvas();
        })();

        function clearCanvas() {
          canvas.width = canvas.width;
        }

        // Set up the UI
        var sigText = document.getElementById('sig-dataUrl');
        var sigImage = document.getElementById('sig-image');
        var clearBtn = document.getElementById('sig-clearBtn');

        clearBtn.addEventListener(
          'click',
          function (e) {
            clearCanvas();
            sigText.innerHTML = 'Data URL for your signature will go here!';
            sigImage.setAttribute('src', '');
          },
          false
        );
      })();
    </script>
  </body>
</html>
